name: Keep Vercel Function Awake

on:
  schedule:
    # Run every minute
    - cron: "* * * * *"
  workflow_dispatch: # Allow manual trigger

jobs:
  keepalive:
    runs-on: ubuntu-latest
    steps:
      - name: Ping keepalive endpoint
        run: |
          curl -f https://commit-digest-api.vercel.app/health/keepalive || exit 1

      - name: Log response
        run: |
          echo "âœ… Keepalive ping successful at $(date)"
